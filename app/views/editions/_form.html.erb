  <%= form.error_messages %>

  <% form.inputs :name => 'Basic Information' do %>
    <% form.semantic_fields_for form.object.requestable.class.to_s.underscore.to_sym do |requestable_form| %>
      <%= render :partial => "#{form.object.requestable.class.to_s.tableize}/form", :object => requestable_form %>
    <% end %>
  <% end %>

  <% form.inputs :name => 'Supporting Documents' do %>
    <% form.semantic_fields_for :documents do |document_form| %>
      <%= document_form.input :document_type_id, :as => :hidden %>
      <%= document_form.input :attached, :label => document_form.object.document_type.to_s %>
    <% end %>
  <% end %>

  <% form.inputs :name => 'Calculations' do %>
    <%= render :partial => "#{form.object.requestable.class.to_s.tableize}/calculation", :object => form.object.requestable %>
    <p>Maximum request: <%=h number_to_currency(form.object.requestable.max_request) %></p>
  <% end %>

  <% form.inputs :name => 'Funding Amount and Rationale' do %>
  <%= form.input :amount, :label => "#{form.object.perspective} Amount" %>
  <%= form.input :comment, :label => "#{form.object.perspective} Comment" %>
  <% end %>

  <%= form.buttons %>

