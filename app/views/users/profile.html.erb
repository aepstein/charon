<h2>Welcome, <%=h current_user.full_name %> (<%=h current_user.net_id %>)</h2>

<% if current_user.admin? %>
<h3>Administration</h3>
<p>
<%= %w( agreements document_types frameworks organizations registrations roles structures users ).map { |option|
  link_to option, send(option + '_path')
}.join(' | ') %>
</p>
<% end %>

<% unless current_user.organizations.empty? %>
  <h3>Organizations You Are In:<h3>

  <p>
  Choose a specific organization to get options particular to that organization.
  </p>

  <table>
    <tr>
      <th>Organization</th>
      <th>Your Role(s)</th>
    </tr>

    <%= render :partial => "organization", :collection => current_user.organizations %>
  </table>
<% end %>

<% unless current_user.registrations.active.unmatched.empty? %>
  <h3>Unmatched Registrations:<h3>

  <p>
  These are registrations that you have started with the Student Acitvities
  Office, but have not yet matched to year-to-year record in the Office of the Assemblies.
  You should <a href="mailto:assembly@cornell.edu">email</a> the office or pick up your
  budget folder to get a matching year-to-year record set up.
  </p>

  <ul>
  <%= render :partial => "registration", :collection => current_user.registrations.active.unmatched %>
  </ul>
<% end %>

<% unless current_user.approvals.agreements.empty? %>
  <h3>Agreements you have accepted</h3>

  <p>
  You have agreed to abide by these agreements.
  </p>

  <%= render :partial => 'approvals', :object => current_user.approvals.agreements, :locals => { :id => 'accepted_agreements' } %>
<% end %>

<% unless current_user.approvals.unfulfilled.empty? %>
  <h3>Agreements awaiting your approval</h3>

  <p>
  These are agreements you must approve before you will have full access to use
  the application system.
  </p>

  <%= render :partial => 'approvals', :object => current_user.approvals.unfulfilled, :locals => { :id => 'unfulfilled_agreements' } %>
<% end %>

